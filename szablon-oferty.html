<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propozycja Wsp√≥≈Çpracy - SKD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .control-btn.active { background-color: #FFC107; color: #0A192F; }
        .chart-container { position: relative; height: 250px; width: 100%; max-width: 500px; margin: auto; }
    </style>
</head>
<body class="bg-[#0A192F] text-[#CCD6F6]">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-black text-white">Propozycja wsp√≥≈Çpracy w ramach SKD</h1>
            <p class="text-lg text-gray-400 mt-2">Przygotowana symulacja korzy≈õci finansowych</p>
        </header>

        <section id="summary-panel" class="bg-[#112240] rounded-lg shadow-lg p-6 md:p-8 border border-gray-700 mb-8">
            <h3 class="text-2xl font-bold text-center text-white mb-4">Proszƒô wybraƒá czas trwania procesu:</h3>
            <div class="flex justify-center border border-gray-700 rounded-lg p-1 bg-[#0A192F] max-w-sm mx-auto mb-6">
                <button class="control-btn duration-btn flex-1 p-3 rounded-md font-bold transition active" data-duration="1">Proces 1 rok</button>
                <button class="control-btn duration-btn flex-1 p-3 rounded-md font-bold transition" data-duration="2">Proces 2 lata</button>
            </div>

            <div class="text-center">
                <p class="text-lg text-gray-400">Przewidywany czysty zysk:</p>
                <h2 class="text-6xl md:text-7xl font-black text-[#FFC107] my-3 [text-shadow:2px_2px_4px_rgba(0,0,0,0.4)]"><span id="net-profit-val"></span></h2>
                <div class="flex justify-center gap-6 text-center mt-4">
                    <div>
                        <p class="text-gray-400">Suma korzy≈õci</p>
                        <p class="font-bold text-green-400 text-xl"><span id="total-benefit-val"></span></p>
                    </div>
                    <div>
                        <p class="text-gray-400">Ca≈Çkowita inwestycja</p>
                        <p class="font-bold text-red-400 text-xl"><span id="total-investment-val"></span></p>
                    </div>
                </div>
            </div>
        </section>

        <section id="key-numbers" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 text-center">
            <div class="bg-[#112240] rounded-lg p-4 border border-gray-700">
                <p class="text-gray-400">G≈Ç√≥wny zwrot (WPS)</p>
                <p class="text-2xl font-bold text-white"><span id="wps-val"></span></p>
            </div>
            <div class="bg-[#112240] rounded-lg p-4 border border-gray-700">
                <p class="text-gray-400">Oszczƒôdno≈õƒá na ratach</p>
                <p class="text-2xl font-bold text-white"><span id="savings-val"></span></p>
            </div>
            <div class="bg-[#112240] rounded-lg p-4 border border-gray-700">
                <p class="text-gray-400">Op≈Çata wstƒôpna</p>
                <p class="text-2xl font-bold text-white"><span id="upfront-fee-val"></span></p>
            </div>
        </section>

        <section id="chart-section" class="bg-[#112240] rounded-lg shadow-lg p-6 md:p-8 border border-gray-700 mb-8">
            <h3 class="text-2xl font-bold text-center text-white mb-4">Inwestycja vs. Potencjalny Zysk</h3>
            <div class="chart-container"><canvas id="investmentVsProfitChart"></canvas></div>
        </section>
        
        <section id="installments" class="bg-[#112240] rounded-lg p-6 border border-gray-700 mb-8">
             <h3 class="text-2xl font-bold text-center text-white mb-4">Elastyczne finansowanie</h3>
             <p class="text-center text-gray-400 mb-4">Op≈Çatƒô wstƒôpnƒÖ <span class="font-bold text-white" id="upfront-fee-val-installments"></span> mo≈ºna roz≈Ço≈ºyƒá na raty 0%:</p>
             <div class="flex justify-center gap-4 text-center">
                <div class="flex-1"><p class="font-bold text-lg text-white">5x</p><p class="text-[#FFC107] font-semibold"><span id="installment-5"></span></p></div>
                <div class="flex-1"><p class="font-bold text-lg text-white">10x</p><p class="text-[#FFC107] font-semibold"><span id="installment-10"></span></p></div>
                <div class="flex-1"><p class="font-bold text-lg text-white">20x</p><p class="text-[#FFC107] font-semibold"><span id="installment-20"></span></p></div>
             </div>
        </section>

        <footer class="text-center py-6">
             <p class="text-lg text-gray-400">Proces w 4 krokach: ‚úçÔ∏è Umowa ‚Üí ‚öñÔ∏è Pozew ‚Üí üèÜ Wygrana ‚Üí üí∞ PieniƒÖdze na koncie!</p>
             <p class="text-lg text-gray-400 mt-4">W razie pyta≈Ñ jestem do dyspozycji</p>
             <p class="text-xl font-bold text-white mt-2">Daniel Daniszewski 508 171 922</p>
        </footer>
    </div>

    <script>
        const formatCurrency = (value) => value.toLocaleString('pl-PL', { style: 'currency', currency: 'PLN', minimumFractionDigits: 2 });
        let investmentChart;
        let currentDuration = '1';

        function initializeChart() {
            const ctx = document.getElementById('investmentVsProfitChart').getContext('2d');
            investmentChart = new Chart(ctx, {
                type: 'bar',
                data: { labels: ['Inwestycja', 'Potencjalna Korzy≈õƒá'], datasets: [{ data: [], backgroundColor: ['#E03616', '#64FFDA'], borderWidth: 1, borderRadius: 5 }] },
                options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', scales: { x: { ticks: { color: '#CCD6F6' } }, y: { ticks: { color: '#CCD6F6' } } }, plugins: { legend: { display: false } } }
            });
        }

        function updateDisplay() {
            const params = new URLSearchParams(window.location.search);
            const wps = parseFloat(params.get('wps'));
            const savings = parseFloat(params.get('savings'));
            const upfrontFee = parseFloat(params.get('upfrontFee'));
            const successFeePerc = parseFloat(params.get('successFee'));
            
            // ZMIANA: Ca≈Çkowicie usuniƒôto logikƒô 'gender'
            
            const interest1Y = wps * 0.105;
            const interest2Y = wps * 0.105 * 2;
            const fee2nd = 922.50;

            const totalBenefit1Y = wps + savings + interest1Y;
            const successFeeAmount1Y = totalBenefit1Y * (successFeePerc / 100);
            const totalInvestment1Y = upfrontFee + fee2nd + successFeeAmount1Y;
            const netProfit1Y = totalBenefit1Y - totalInvestment1Y;

            const totalBenefit2Y = wps + savings + interest2Y;
            const successFeeAmount2Y = totalBenefit2Y * (successFeePerc / 100);
            const totalInvestment2Y = upfrontFee + fee2nd + successFeeAmount2Y;
            const netProfit2Y = totalBenefit2Y - totalInvestment2Y;

            const isOneYear = currentDuration === '1';
            document.getElementById('net-profit-val').textContent = formatCurrency(isOneYear ? netProfit1Y : netProfit2Y);
            document.getElementById('total-benefit-val').textContent = formatCurrency(isOneYear ? totalBenefit1Y : totalBenefit2Y);
            document.getElementById('total-investment-val').textContent = formatCurrency(isOneYear ? totalInvestment1Y : totalInvestment2Y);

            document.getElementById('wps-val').textContent = formatCurrency(wps);
            document.getElementById('savings-val').textContent = formatCurrency(savings);
            document.getElementById('upfront-fee-val').textContent = formatCurrency(upfrontFee);

            document.getElementById('upfront-fee-val-installments').textContent = formatCurrency(upfrontFee);
            document.getElementById('installment-5').textContent = formatCurrency(upfrontFee / 5);
            document.getElementById('installment-10').textContent = formatCurrency(upfrontFee / 10);
            document.getElementById('installment-20').textContent = formatCurrency(upfrontFee / 20);
            
            investmentChart.data.datasets[0].data = [isOneYear ? totalInvestment1Y : totalInvestment2Y, isOneYear ? totalBenefit1Y : totalBenefit2Y];
            investmentChart.update();
        }

        window.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            if (!urlParams.has('wps')) {
                document.body.innerHTML = '<h1 class="text-white text-center text-2xl p-8">B≈ÇƒÖd: Brak danych do wygenerowania oferty.</h1>';
                return;
            }
            
            initializeChart();
            
            const durationButtons = document.querySelectorAll('.duration-btn');
            durationButtons.forEach(button => {
                button.addEventListener('click', () => {
                    durationButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    currentDuration = button.dataset.duration;
                    updateDisplay();
                });
            });

            updateDisplay();
        });
    </script>
</body>
</html>
