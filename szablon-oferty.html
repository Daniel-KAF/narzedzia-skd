<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propozycja Wsp√≥≈Çpracy - SKD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; height: 250px; width: 100%; max-width: 500px; margin: auto; }
        .summary-table { width: 100%; border-collapse: collapse; }
        .summary-table td { padding: 12px 8px; border-bottom: 1px solid #374151; }
        .summary-table tr:last-child td { border-bottom: none; }
        .summary-table .label { color: #d1d5db; }
        .summary-table .amount { text-align: right; font-weight: 700; white-space: nowrap; }
        .summary-table .green-text { color: #34d399; }
        .summary-table .red-text { color: #ef4444; }
        .summary-table .total-row td { border-top: 2px solid #FFC107; padding-top: 15px; font-size: 1.25rem; font-weight: 900; }
        .summary-table .total-row .label { color: white; }
        .summary-table .total-row .amount { color: #FFC107; }
        /* Style dla suwaka */
        input[type="range"] { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background: #374151; border-radius: 4px; outline: none; transition: opacity .2s; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; background: #FFC107; cursor: pointer; border-radius: 50%; }
        input[type="range"]::-moz-range-thumb { width: 24px; height: 24px; background: #FFC107; cursor: pointer; border-radius: 50%; }
        /* Style dla kafelk√≥w rat */
        .installment-option { 
            background-color: #0A192F; 
            border: 1px solid #374151; 
            border-radius: 8px; 
            padding: 16px; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: all 0.2s ease-in-out;
            cursor: default;
        }
        .installment-option:hover {
            transform: translateY(-3px);
            border-color: #60a5fa;
            box-shadow: 0 6px 15px rgba(0,0,0,0.4);
        }
        .installment-option .term { 
            font-size: 1.75rem; /* text-3xl */
            font-weight: 800; /* font-extrabold */
            color: white; 
            margin-bottom: 8px; /* mb-2 */
        }
        .installment-option .value { 
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* font-bold */
            color: #34d399; /* text-green-400 */
        }
    </style>
</head>
<body class="bg-[#0A192F] text-[#CCD6F6]">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-black text-white">Propozycja wsp√≥≈Çpracy w ramach SKD</h1>
            <p class="text-lg text-gray-400 mt-2">Przygotowana symulacja korzy≈õci finansowych</p>
        </header>

        <p class="text-lg text-gray-400 mt-4 text-center mb-8">Proces w 4 krokach: ‚úçÔ∏è Umowa ‚Üí ‚öñÔ∏è Pozew ‚Üí üèÜ Wygrana ‚Üí üí∞ PieniƒÖdze na koncie!</p>

        <section id="summary-panel" class="bg-[#112240] rounded-lg shadow-lg p-6 md:p-8 border border-gray-700 mb-8">
            <div class="max-w-md mx-auto mb-8">
                <label for="durationSlider" class="block text-center text-2xl font-bold text-white mb-3">
                    Przewidywany czas trwania procesu: <span id="durationValue" class="text-[#FFC107]">12 miesiƒôcy</span>
                </label>
                <input type="range" id="durationSlider" min="3" max="36" value="12" class="w-full">
            </div>

            <table class="summary-table max-w-2xl mx-auto">
                <tbody>
                    <tr>
                        <td class="label">Zwrot kapita≈Çu (WPS)</td>
                        <td class="amount green-text" id="calc-wps"></td>
                    </tr>
                    <tr>
                        <td class="label">Naliczone odsetki karne</td>
                        <td class="amount green-text" id="calc-interest"></td>
                    </tr>
                    <tr>
                        <td class="label">Dodatkowa korzy≈õƒá (Oszczƒôdno≈õƒá na ratach)</td>
                        <td class="amount green-text" id="calc-savings"></td>
                    </tr>
                    <tr>
                        <td class="label">Koszty na start (Op≈Çata wstƒôpna)</td>
                        <td class="amount red-text" id="calc-upfront-fee"></td>
                    </tr>
                    <tr>
                        <td class="label">Op≈Çata za ewentualnƒÖ II instancjƒô</td>
                        <td class="amount red-text">- 922,50 z≈Ç</td>
                    </tr>
                    <tr>
                        <td class="label">Success Fee (prowizja od sukcesu)</td>
                        <td class="amount red-text" id="calc-success-fee"></td>
                    </tr>
                    <tr class="total-row">
                        <td class="label">ZYSK NA CZYSTO</td>
                        <td class="amount" id="calc-net-profit"></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="chart-section" class="bg-[#112240] rounded-lg shadow-lg p-6 md:p-8 border border-gray-700 mb-8">
            <h3 class="text-2xl font-bold text-center text-white mb-4">Inwestycja na start vs. Zysk na czysto</h3>
            <div class="chart-container"><canvas id="investmentVsProfitChart"></canvas></div>
        </section>
        
        <section id="installments" class="bg-[#112240] rounded-lg p-6 border border-gray-700 mb-8">
             <h3 class="text-2xl font-bold text-center text-white mb-4">Elastyczne finansowanie</h3>
             <p class="text-center text-gray-400 mb-6">Op≈Çatƒô wstƒôpnƒÖ <span class="font-bold text-white" id="upfront-fee-val-installments"></span> mo≈ºna roz≈Ço≈ºyƒá na raty 0%:</p>
             <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center max-w-xl mx-auto">
                <div class="installment-option">
                    <p class="term">5x</p>
                    <p class="value"><span id="installment-5"></span></p>
                </div>
                <div class="installment-option">
                    <p class="term">10x</p>
                    <p class="value"><span id="installment-10"></span></p>
                </div>
                <div class="installment-option">
                    <p class="term">20x</p>
                    <p class="value"><span id="installment-20"></span></p>
                </div>
             </div>
        </section>

        <footer class="text-center py-6">
             <p class="text-lg text-gray-400">W razie pyta≈Ñ jestem do dyspozycji</p>
             <p class="text-xl font-bold text-white mt-2">Daniel Daniszewski 508 171 922</p>
        </footer>
    </div>

    <script>
        const formatCurrency = (value) => value.toLocaleString('pl-PL', { style: 'currency', currency: 'PLN', minimumFractionDigits: 2 });
        let investmentChart;

        function initializeChart() {
            const ctx = document.getElementById('investmentVsProfitChart').getContext('2d');
            investmentChart = new Chart(ctx, {
                type: 'bar',
                data: { labels: ['Inwestycja na start', 'Zysk na czysto'], datasets: [{ data: [], backgroundColor: ['#ef4444', '#34d399'], borderWidth: 1, borderRadius: 5 }] },
                options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', scales: { x: { ticks: { color: '#CCD6F6' } }, y: { ticks: { color: '#CCD6F6' } } }, plugins: { legend: { display: false } } }
            });
        }

        function updateDisplay() {
            const params = new URLSearchParams(window.location.search);
            const wps = parseFloat(params.get('wps')) || 0;
            const savings = parseFloat(params.get('savings')) || 0;
            const upfrontFee = parseFloat(params.get('upfrontFee')) || 0;
            const successFeePerc = parseFloat(params.get('successFee')) / 100 || 0;
            
            const durationSlider = document.getElementById('durationSlider');
            const durationMonths = parseInt(durationSlider.value);
            document.getElementById('durationValue').textContent = `${durationMonths} miesi${durationMonths === 1 ? 'ƒÖc' : (durationMonths < 5 ? 'ƒÖce' : 'ƒôcy')}`;


            const annualInterestRate = 0.105;
            const fee2ndInstance = 922.50; 
            
            const interestTotal = wps * (annualInterestRate / 12) * durationMonths;
            const clientGrossProfit = wps + interestTotal + savings;
            const successFeeAmount = clientGrossProfit * successFeePerc;
            
            const clientNetProfit = clientGrossProfit - successFeeAmount - upfrontFee - fee2ndInstance;
            
            document.getElementById('calc-wps').textContent = "+ " + formatCurrency(wps);
            document.getElementById('calc-interest').textContent = "+ " + formatCurrency(interestTotal);
            document.getElementById('calc-savings').textContent = "+ " + formatCurrency(savings);
            document.getElementById('calc-upfront-fee').textContent = "- " + formatCurrency(upfrontFee);
            document.getElementById('calc-success-fee').textContent = "- " + formatCurrency(successFeeAmount);
            document.getElementById('calc-net-profit').textContent = formatCurrency(clientNetProfit);

            document.getElementById('upfront-fee-val-installments').textContent = formatCurrency(upfrontFee);
            document.getElementById('installment-5').textContent = formatCurrency(upfrontFee / 5);
            document.getElementById('installment-10').textContent = formatCurrency(upfrontFee / 10);
            document.getElementById('installment-20').textContent = formatCurrency(upfrontFee / 20);
            
            const totalUpfrontInvestment = upfrontFee + fee2ndInstance;
            investmentChart.data.datasets[0].data = [totalUpfrontInvestment, clientNetProfit > 0 ? clientNetProfit : 0];
            investmentChart.update();
        }

        window.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            if (!urlParams.has('wps')) {
                document.body.innerHTML = '<h1 class="text-white text-center text-2xl p-8">B≈ÇƒÖd: Brak danych do wygenerowania oferty.</h1>';
                return;
            }
            
            initializeChart();
            
            const durationSlider = document.getElementById('durationSlider');
            durationSlider.addEventListener('input', updateDisplay);

            updateDisplay(); 
        });
    </script>
</body>
</html>
